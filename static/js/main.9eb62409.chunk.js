(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(65)},41:function(e,t,a){},42:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},43:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),o=a.n(s),u=(a(41),a(6)),i=a(7),l=a(9),c=a(8),h=a(10),g=(a(42),a(43),a(19)),d=a.n(g),m=a(35),f=a(32),p=a(12),v=a(20),k=a.n(v),y=a(33),q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.currentLocation,n={longitude:t.geometry.coordinates[0],latitude:t.geometry.coordinates[1]},s=(a?Object(y.getDistance)(a,n):0)/1609.344,o="red";t.properties.mag<3?o="green":t.properties.mag>=3&&t.properties.mag<5?o="blue":t.properties.mag>=5&&t.properties.mag<7&&(o="orange");var u,i={padding:"6px",marginTop:"3px",marginBottom:"3px",borderRadius:"3px",backgroundColor:t._isNew?"lightgreen":"white",border:"1px solid gray"},l={position:"relative",width:"15%",bottom:"16px",display:"inline-block",color:o,textAlign:"center"};return r.a.createElement("div",{style:i,onClick:function(){return window.open(t.properties.url,"_blank")}},r.a.createElement("div",{style:l},(u=t.properties.mag,parseFloat(u).toFixed(1))),r.a.createElement("div",{style:{fontSize:"smaller",display:"inline-block",width:"90%"}},r.a.createElement("div",{style:{}},t.properties.place),r.a.createElement("div",{style:{}},k()(t.properties.time).format("MMM DD YYYY HH:mm:ss.SSS")," (",k()(t.properties.time).fromNow(),")"),r.a.createElement("div",null,Math.round(s)," miles")))}}]),t}(n.Component),w=a(34),j=a.n(w),b=6e4,E=[{title:"Last Hour: Significant Earthquakes",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_hour.geojson"},{title:"Last Hour: >= Mag 4.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_hour.geojson"},{title:"Last Hour: >= Mag 2.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_hour.geojson"},{title:"Last Hour: >= 1.0",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/1.0_hour.geojson"},{title:"Last Hour: All",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson"},{title:"Last Day: Significant Earthquakes",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_day.geojson"},{title:"Last Day: >= Mag 4.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_day.geojson"},{title:"Last Day: >= Mag 2.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_day.geojson"},{title:"Last Day: >= 1.0",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/1.0_day.geojson"},{title:"Last Day: All",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson"},{title:"Last Week: Significant Earthquakes",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_week.geojson"},{title:"Last Week: >= Mag 4.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson"},{title:"Last Week: >= Mag 2.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojson"},{title:"Last Week: >= 1.0",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/1.0_week.geojson"},{title:"Last Week: All",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson"},{title:"Last Month: Significant Earthquakes",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_month.geojson"},{title:"Last Month: >= Mag 4.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_month.geojson"},{title:"Last Month: >= Mag 2.5",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_month.geojson"},{title:"Last Month: >= 1.0",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/1.0_month.geojson"},{title:"Last Month: All",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson"}],L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={isOpen:!0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props,a=t.quakes,n=t.newCount,s=t.currentLocation;return r.a.createElement("div",{style:{textAlign:"left",marginTop:"20px"}},r.a.createElement("div",null,a.length," Earthquake",1!==a.length?"s":""," ",n?"(".concat(n," new)"):""),a.length&&e?r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"left",width:"100%",whiteSpace:"nowrap",overflow:"hidden"}},a.map(function(e){return r.a.createElement(q,{data:e,currentLocation:s})}))):null)}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).fetchQuakes=Object(f.a)(d.a.mark(function e(){var t,n,r,s,o,u,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentFeed,e.next=3,fetch(E[t].url);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,s=r.features,o=[],u=[],a.state.firstLoad||((o=Object(m.a)(a.state.earthquakes)).forEach(function(e){e._isNew=!1}),(u=j.a.differenceBy(r.features,o,"id")).forEach(function(e){s.find(function(t){return e.id===t.id})._isNew=!0})),s.sort(function(e,t){return t.properties.time-e.properties.time}),clearInterval(a.countdownTimer),clearTimeout(a.fetchTimer),i=b/1e3,t>16?i=-1:(a.fetchTimer=setTimeout(a.fetchQuakes,b),a.countdownTimer=setInterval(function(){a.setState({countDown:a.state.countDown-1})},1e3)),a.setState({firstLoad:!1,countDown:i,feedInfo:r.metadata,newQuakeCount:u.length,earthquakes:s});case 17:case"end":return e.stop()}},e)})),a.changeFeed=a.changeFeed.bind(Object(p.a)(a)),a.fetchQuakes=a.fetchQuakes.bind(Object(p.a)(a)),a.state={firstLoad:!0,earthquakes:[],newQuakeCount:0,feedInfo:null,testQuakes:[],countDown:b/1e3,currentFeed:7},a.earthquakes=[],a.fetchTimer=null,a.countdownTimer=null,a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"changeFeed",value:function(e){var t=e.target.value;this.setState({currentFeed:t,firstLoad:!0})}},{key:"render",value:function(){var e=this;this.state.firstLoad&&this.fetchQuakes();var t=this.props.currentLocation;return r.a.createElement("div",{style:{textAlign:"left",width:"100%"}},r.a.createElement("div",null,r.a.createElement("select",{id:"feed-select",value:this.state.currentFeed,onChange:this.changeFeed},E.map(function(e,t){return r.a.createElement("option",{value:t},e.title)}))),r.a.createElement("div",{style:{fontSize:"larger"}},this.state.feedInfo&&this.state.feedInfo.title),r.a.createElement("div",null,e.state.countDown>=0?r.a.createElement("span",null,"Checking USGS in ",e.state.countDown," seconds"):r.a.createElement("span",null,"Auto refresh disabled for this feed"),r.a.createElement("span",null,r.a.createElement("button",{onClick:this.fetchQuakes},"Refresh"))),r.a.createElement(L,{currentLocation:t,quakes:this.state.earthquakes,newCount:this.state.newQuakeCount}))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={location:null},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.watchPosition(function(t){console.log(t);var a={latitude:t.coords.latitude,longitude:t.coords.longitude};e.setState({location:a})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,{currentLocation:this.state.location}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.9eb62409.chunk.js.map